(function(){"use strict";var t={9206:function(t,e,o){var i=o(9242),s=o(3396),r=o(7139);const a={class:"container"},n={class:"row"},c={class:"col-12 col-lg-7 d-flex align-items-center justify-content-center"},d={class:"col-12 col-lg-5"},l={class:"right-menu-container shadow-lg p-4"},p={class:""},u={class:"mb-3 w-100"},h=(0,s._)("label",{for:"inputStart",class:"form-label"},"Partida",-1),m={class:"mb-3 w-100"},v=(0,s._)("label",{for:"inputStart",class:"form-label"},"Destino",-1),f={class:"form-group mt-3"},g=(0,s._)("label",{for:"input-qtd-rotas",class:"form-label"},"Método de Pesquisa:",-1),A={class:"form-check"},y=(0,s._)("label",{class:"form-check-label",for:"input-radio-pesquisa-rapida"}," Pesquisa Rapida ",-1),S={class:"form-check"},P=(0,s._)("label",{class:"form-check-label",for:"input-radio-pesquisa-total"}," Pesquisa Total (Lento) ",-1),C={class:"form-check"},R=(0,s._)("label",{class:"form-check-label",for:"input-radio-pesquisa-server-melhor"}," Calcular no Servidor (Melhor rota) ",-1),x={class:"form-check"},O=(0,s._)("label",{class:"form-check-label",for:"input-radio-pesquisa-server-todas"}," Calcular no Servidor (Todas) ",-1),M={key:0,class:"form-group mt-3"},E={for:"input-qtd-rotas",class:"form-label"},b=["max"],w=["disabled"],_={key:1},k={class:"mt-3"},T=(0,s._)("br",null,null,-1);function G(t,e,o,G,I,D){const L=(0,s.up)("map-viewer"),q=(0,s.up)("ModelSelect"),V=(0,s.up)("loading-state"),B=(0,s.up)("empty-state"),$=(0,s.up)("RouteTable");return(0,s.wg)(),(0,s.iD)("div",a,[(0,s._)("div",n,[(0,s._)("div",c,[(0,s.Wm)(L,{class:"",airports:t.airports,connections:t.connections,regionColors:t.regionColors,activeRoute:t.activeRoute,"selected-option-start":t.selectedOptionStart,"selected-option-end":t.selectedOptionEnd,onSetStartAirport:t.setOptionStartAirport,onSetEndAirport:t.setOptionEndAirport,onRemoveConnection:t.removeConnection,onAddConnection:t.addConnection},null,8,["airports","connections","regionColors","activeRoute","selected-option-start","selected-option-end","onSetStartAirport","onSetEndAirport","onRemoveConnection","onAddConnection"])]),(0,s._)("div",d,[(0,s._)("div",l,[(0,s._)("div",p,[(0,s._)("div",u,[h,(0,s.Wm)(q,{options:t.airportOptionsStart,class:"w-100",modelValue:t.selectedOptionStart,"onUpdate:modelValue":e[0]||(e[0]=e=>t.selectedOptionStart=e)},null,8,["options","modelValue"])]),(0,s._)("div",m,[v,(0,s.Wm)(q,{options:t.airportOptionsEnd,class:"w-100",modelValue:t.selectedOptionEnd,"onUpdate:modelValue":e[1]||(e[1]=e=>t.selectedOptionEnd=e)},null,8,["options","modelValue"])])]),(0,s._)("div",f,[g,(0,s._)("div",A,[(0,s.wy)((0,s._)("input",{class:"form-check-input",type:"radio",id:"input-radio-pesquisa-rapida",value:"rapida","onUpdate:modelValue":e[2]||(e[2]=e=>t.searchType=e),checked:""},null,512),[[i.G2,t.searchType]]),y]),(0,s._)("div",S,[(0,s.wy)((0,s._)("input",{class:"form-check-input",type:"radio",value:"total",id:"input-radio-pesquisa-total","onUpdate:modelValue":e[3]||(e[3]=e=>t.searchType=e)},null,512),[[i.G2,t.searchType]]),P]),(0,s._)("div",C,[(0,s.wy)((0,s._)("input",{class:"form-check-input",type:"radio",value:"server-melhor",id:"input-radio-pesquisa-server-melhor","onUpdate:modelValue":e[4]||(e[4]=e=>t.searchType=e)},null,512),[[i.G2,t.searchType]]),R]),(0,s._)("div",x,[(0,s.wy)((0,s._)("input",{class:"form-check-input",type:"radio",value:"server-todas",id:"input-radio-pesquisa-server-todas","onUpdate:modelValue":e[5]||(e[5]=e=>t.searchType=e)},null,512),[[i.G2,t.searchType]]),O])]),["rapida","server-todas"].includes(t.searchType)?((0,s.wg)(),(0,s.iD)("div",M,[(0,s._)("label",E,"Quantidade de Rotas: "+(0,r.zw)(Number(t.pathsLimit).toLocaleString()),1),(0,s.wy)((0,s._)("input",{type:"range",class:"form-range",min:"10",max:"rapida"==t.searchType?1e4:2e5,step:"10",id:"input-qtd-rotas","onUpdate:modelValue":e[6]||(e[6]=e=>t.pathsLimit=e)},null,8,b),[[i.nr,t.pathsLimit]])])):(0,s.kq)("",!0),(0,s._)("button",{disabled:!t.canpickRoutes,onClick:e[7]||(e[7]=(...e)=>t.pickRoutes&&t.pickRoutes(...e)),class:"btn btn-primary w-100 mt-3"}," Montar Rota ",8,w),t.airportRoutes.length&&!t.isLoadingRoutes?((0,s.wg)(),(0,s.iD)("div",_,[(0,s._)("p",k,[(0,s.Uk)(" Rotas Calculadas: "+(0,r.zw)(t.calculatedPathsCount),1),T,(0,s.Uk)(" Tempo de Cálculo: "+(0,r.zw)(t.calculatedTime),1)])])):(0,s.kq)("",!0),t.isLoadingRoutes?((0,s.wg)(),(0,s.j4)(V,{key:2,class:"mt-5 animate__animated animate__zoomIn animate__faster"})):(0,s.kq)("",!0),t.airportRoutes.length||t.isLoadingRoutes?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(B,{key:3,class:"mt-4"})),t.airportRoutes.length?((0,s.wg)(),(0,s.j4)($,{key:4,airportRoutes:t.airportRoutes,onActiveRouteSelect:t.setActiveRoute},null,8,["airportRoutes","onActiveRouteSelect"])):(0,s.kq)("",!0)])])])])}o(7658);var I=o(2682),D=JSON.parse('{"$1":[{"id":"RS1","x":308,"y":507,"description":"Aeroporto Internacional de Porto Alegre / Salgado Filho"},{"id":"RS2","x":323,"y":557,"description":"Aeroporto Regional de Caxias do Sul / Hugo Cantergiani"},{"id":"SC1","x":373,"y":491,"description":"Aeroporto Internacional de Florianópolis / Hercílio Luz"},{"id":"SC2","x":330,"y":482,"description":"Aeroporto Internacional de Navegantes / Ministro Victor Konder"},{"id":"PR1","x":322,"y":447,"description":"Aeroporto Internacional de Curitiba / Afonso Pena"},{"id":"PR2","x":358,"y":453,"description":"Aeroporto Regional de Maringá / Silvio Name"},{"id":"SP1","x":380,"y":422,"description":"Aeroporto Internacional de São Paulo / Congonhas"},{"id":"SP2","x":420,"y":442,"description":"Aeroporto Internacional de Viracopos / Campinas"},{"id":"SP3","x":393,"y":456,"description":"Aeroporto Internacional de São Paulo/Guarulhos-Governador André Franco Motoro"},{"id":"SP4","x":394,"y":399,"description":"Aeroporto Estadual de Presidente Prudente"},{"id":"SP5","x":360,"y":402,"description":"Aeroporto Estadual de Bauru/Arealva"},{"id":"MG1","x":376,"y":374,"description":"Aeroporto Internacional de Minas Gerais / Confins – Tancredo Neves"},{"id":"MG2","x":462,"y":374,"description":"Aeroporto de Montes Claros/Mário Ribeiro"},{"id":"MG3","x":432,"y":331,"description":"Aeroporto de Uberlândia / Ten. Cel. Av. César Bombonato"},{"id":"RJ1","x":458,"y":426,"description":"Aeroporto Internacional do Rio de Janeiro / Galeão-Antônio Carlos Jobim"},{"id":"RJ2","x":486,"y":430,"description":"Aerorporto Santos Dumont"},{"id":"RJ3","x":502,"y":416,"description":"Aeroporto Internacional de Cabo Frio"},{"id":"ES1","x":513,"y":390,"description":"Aeroporto de Vitória – Eurico de Aguiar Salles"},{"id":"MS1","x":308,"y":398,"description":"Aeroporto Internacional de Campo Grande"},{"id":"GO1","x":355,"y":348,"description":"Aeroporto de Goiânia / Santa Genoveva"},{"id":"GO2","x":374,"y":304,"description":"Aeroporto Internacional de Brasília / Presidente Jucelino Kubitschek"},{"id":"DF1","x":398,"y":324,"description":"Aeroporto Internacional de Manaus / Eduardo Gomes"},{"id":"MT1","x":272,"y":272,"description":"Aeroporto Internacional de Cuiabá / Marechal Rondon"},{"id":"BA1","x":460,"y":271,"description":"Aeroporto Internacional de Salvador / Deputado Luis Eduardo Magalhães"},{"id":"BA2","x":491,"y":296,"description":"Aeroporto Internacional de Porto Seguro"},{"id":"PI1","x":450,"y":222,"description":"Aeroporto de Teresina – Senador Petrônio Portella"},{"id":"SE1","x":554,"y":257,"description":"Aeroporto Internacional de Aracaju / Santa Maria"},{"id":"AL1","x":572,"y":240,"description":"Aeroporto de Maceió / Zumbi dos Palmares"},{"id":"PB1","x":569,"y":201,"description":"Aeroporto Internacional de João Pessoa / Presidente Castro Pinto"},{"id":"PE1","x":569,"y":218,"description":"Aeroporto Internacional do Recife/ Guararapes – Gilberto Freyre"},{"id":"PE2","x":510,"y":216,"description":"Aeroporto de Petrolina / Senador Nilo Coelho"},{"id":"RN1","x":558,"y":184,"description":"Aeroporto Internacional de Natal / Augusto Severo"},{"id":"MA1","x":438,"y":158,"description":"Aeroporto Internacional de São Luís / Marechal Cunha Machado"},{"id":"CE1","x":520,"y":156,"description":"Aeroporto Internacional de Fortaleza / Pinto Martins"},{"id":"CE2","x":511,"y":188,"description":"Aeroporto de Juazeiro do Norte – Orlando Bezerra"},{"id":"AM1","x":133,"y":142,"description":"Aeroporto Internacional de Manaus / Eduardo Gomes"},{"id":"AP1","x":336,"y":84,"description":"Aeroporto Internacional de Macapá"},{"id":"RO1","x":180,"y":230,"description":"Aeroporto Internacional de Porto Velho / Governador Jorge Teixeira de Oliveira"},{"id":"RR1","x":206,"y":78,"description":"Aeroporto Internacional de Boa Vista / Atlas Brasil Cantanhede"},{"id":"TO1","x":391,"y":246,"description":"Aeroporto de Palmas/Brigadeiro Lysias Rodrigues"},{"id":"AC1","x":84,"y":239,"description":"Aeroporto Internacional de Rio Branco / Plácido de Castro"},{"id":"PA1","x":332,"y":196,"description":"Aeroporto Internacional de Belém / Val de Cans"}],"I_":[{"ids":["RS1","RS2"],"cost":0},{"ids":["RS1","SC1"],"cost":0},{"ids":["SC1","SC2"],"cost":0},{"ids":["SC1","PR2"],"cost":0},{"ids":["PR2","PR1"],"cost":0},{"ids":["PR2","SP3"],"cost":0},{"ids":["SP3","SP2"],"cost":0},{"ids":["SP2","SP1"],"cost":0},{"ids":["SP2","RJ1"],"cost":0},{"ids":["SP2","SP4"],"cost":0},{"ids":["SP4","MG2"],"cost":0},{"ids":["SP4","SP5"],"cost":0},{"ids":["RJ1","RJ2"],"cost":0},{"ids":["RJ2","RJ3"],"cost":0},{"ids":["RJ3","ES1"],"cost":0},{"ids":["ES1","MG2"],"cost":0},{"ids":["MG2","RJ2"],"cost":0},{"ids":["MG2","RJ3"],"cost":0},{"ids":["MG2","MG1"],"cost":0},{"ids":["MG2","MG3"],"cost":0},{"ids":["MG2","BA2"],"cost":0},{"ids":["MG1","SP5"],"cost":0},{"ids":["MG1","MG3"],"cost":0},{"ids":["MG1","DF1"],"cost":0},{"ids":["MG1","GO1"],"cost":0},{"ids":["MG1","MS1"],"cost":0},{"ids":["ES1","BA2"],"cost":0},{"ids":["ES1","MG3"],"cost":0},{"ids":["MG3","BA2"],"cost":0},{"ids":["MG3","DF1"],"cost":0},{"ids":["MG3","BA1"],"cost":0},{"ids":["BA2","SE1"],"cost":0},{"ids":["BA2","BA1"],"cost":0},{"ids":["BA1","SE1"],"cost":0},{"ids":["BA1","PI1"],"cost":0},{"ids":["BA1","PE2"],"cost":0},{"ids":["BA1","TO1"],"cost":0},{"ids":["PE2","AL1"],"cost":0},{"ids":["SE1","AL1"],"cost":0},{"ids":["AL1","PE1"],"cost":0},{"ids":["PE1","PB1"],"cost":0},{"ids":["PB1","RN1"],"cost":0},{"ids":["PE2","PE1"],"cost":0},{"ids":["PE2","CE2"],"cost":0},{"ids":["PE2","PI1"],"cost":0},{"ids":["CE2","PB1"],"cost":0},{"ids":["CE2","CE1"],"cost":0},{"ids":["CE2","MA1"],"cost":0},{"ids":["CE2","PI1"],"cost":0},{"ids":["PB1","AP1"],"cost":0},{"ids":["RN1","AP1"],"cost":0},{"ids":["RN1","CE1"],"cost":0},{"ids":["CE1","PI1"],"cost":0},{"ids":["CE1","AP1"],"cost":0},{"ids":["MA1","PI1"],"cost":0},{"ids":["MA1","TO1"],"cost":0},{"ids":["MA1","AP1"],"cost":0},{"ids":["MA1","PA1"],"cost":0},{"ids":["TO1","MT1"],"cost":0},{"ids":["TO1","PA1"],"cost":0},{"ids":["TO1","AP1"],"cost":0},{"ids":["GO1","MS1"],"cost":0},{"ids":["GO1","GO2"],"cost":0},{"ids":["GO1","MT1"],"cost":0},{"ids":["GO2","DF1"],"cost":0},{"ids":["GO2","MT1"],"cost":0},{"ids":["MT1","RO1"],"cost":0},{"ids":["MT1","AC1"],"cost":0},{"ids":["MT1","AM1"],"cost":0},{"ids":["MT1","AP1"],"cost":0},{"ids":["MT1","PA1"],"cost":0},{"ids":["PA1","AP1"],"cost":0},{"ids":["AP1","RR1"],"cost":0},{"ids":["RR1","AM1"],"cost":0},{"ids":["AC1","AM1"],"cost":0},{"ids":["AC1","RO1"],"cost":0}],"sL":[{"ids":["SC","RS","PR"],"color":"#D5E8D4"},{"ids":["SP","RJ","ES","MG"],"color":"#FFF2CC"},{"ids":["BA","PI","PE","SE","AL","PE","PB","RN","CE","MA"],"color":"#F8CECC"},{"ids":["MS","GO","DF","MT"],"color":"#D0CEE2"},{"ids":["RO","AM","AC","RR","AP","PA","TO"],"color":"#FFE6CC"}]}');const L={class:"d-flex flex-column justify-content-center align-items-center"},q=(0,s._)("img",{src:"img/loading.gif",alt:""},null,-1),V=(0,s._)("p",null,"Carregando...",-1),B=[q,V];function $(t,e){return(0,s.wg)(),(0,s.iD)("div",L,B)}var J=o(89);const j={},N=(0,J.Z)(j,[["render",$]]);var Z=N,F=o(4161),U=o(2492),z=o.n(U);const H={class:"py-2"},W={class:"form-floating mb-3"},K=(0,s._)("label",{for:"inputSearch"},"Buscar...",-1),X=["onMouseover"];function Y(t,e,o,a,n,c){const d=(0,s.up)("EasyDataTable");return(0,s.wg)(),(0,s.iD)("div",H,[(0,s._)("div",W,[(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",id:"inputSearch",placeholder:"Buscar...","onUpdate:modelValue":e[0]||(e[0]=e=>t.searchValue=e)},null,512),[[i.nr,t.searchValue]]),K]),(0,s.Wm)(d,{headers:t.headers,items:t.routes,"search-field":"path","search-value":t.searchValueDebouced,"rows-per-page":10,"buttons-pagination":"",alternating:""},{"item-path":(0,s.w5)((({path:o})=>[(0,s._)("div",{onMouseover:e=>t.$emit("activeRouteSelect",o),onMouseleave:e[1]||(e[1]=e=>t.$emit("activeRouteSelect",[])),class:"route-item"},(0,r.zw)(o),41,X)])),_:1},8,["headers","items","search-value"])])}var Q=o(814),tt=o(354),et=o.n(tt);const ot=[{text:"Pos.",value:"pos",sortable:!0},{text:"Distancia",value:"distance"},{text:"Caminho",value:"path"}];var it=(0,s.aZ)({props:{airportRoutes:{required:!0,type:Array}},data(){return{headers:ot,searchValue:"",searchValueDebouced:"",updateSearchValue:null}},computed:{routes(){return this.airportRoutes.map((t=>t))}},mounted(){this.updateSearchValue=et()((()=>{this.searchValueDebouced=this.searchValue}),200)},directives:{tippy:Q.XM},watch:{searchValue(){"function"==typeof this.updateSearchValue&&this.updateSearchValue()}}});const st=(0,J.Z)(it,[["render",Y]]);var rt=st,at=o.p+"img/mapa-brasil.884d5862.svg";const nt=t=>((0,s.dD)("data-v-637e0c06"),t=t(),(0,s.Cn)(),t),ct={class:""},dt={ref:"map-image",id:"map-image",src:at,width:"600",height:"600",alt:""},lt={class:"p-1"},pt={class:"text-center"},ut={class:"d-flex gap-2 mt-2"},ht=["onClick"],mt=["onClick"],vt=["onClick"],ft=nt((()=>(0,s._)("i",{class:"fa fa-plus-circle"},null,-1))),gt=[ft],At=["onClick"];function yt(t,e,o,i,a,n){const c=(0,s.up)("tippy");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",ct,[(0,s._)("div",{ref:"map-container",id:"map-container",class:(0,r.C_)({"showing-active-route":t.activeRoute.length}),onMouseup:e[0]||(e[0]=e=>t.draggingAirport=null),onMousemove:e[1]||(e[1]=(...e)=>t.moveDraggingAirport&&t.moveDraggingAirport(...e))},[(0,s._)("img",dt,null,512),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.airports,((e,o)=>((0,s.wg)(),(0,s.j4)(c,{style:(0,r.j5)({left:`${e.x}px`,top:`${e.y}px`,"background-color":t.airportColors[e.id]}),class:(0,r.C_)(["airport",{"selected-end":e.id===t.selectedOptionEnd.value,"selected-start":e.id===t.selectedOptionStart.value}]),key:o,onMousedown:o=>t.draggingAirport=e,tag:"div","content-tag":"span","content-class":"airport",interactive:""},{default:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(e.id),1)])),content:(0,s.w5)((()=>[(0,s._)("div",lt,[(0,s._)("div",pt,(0,r.zw)(e.description),1),(0,s._)("div",ut,[(0,s._)("button",{class:"btn btn-set-start btn-sm flex-grow-1",onClick:o=>t.$emit("setStartAirport",e.id)}," Partida ",8,ht),(0,s._)("button",{class:"btn btn-set-end btn-sm flex-grow-1",onClick:o=>t.$emit("setEndAirport",e.id)}," Destino ",8,mt),""==t.selectedOptionStart.value||t.selectedOptionStart.value==e.id||t.connections.some((o=>o.ids.includes(t.selectedOptionStart.value)&&o.ids.includes(e.id)))?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("button",{key:0,class:"btn btn-add-connection btn-sm flex-grow-0",onClick:o=>t.createConnectionWithSelected(e.id)},gt,8,vt))])])])),_:2},1032,["style","class","onMousedown"])))),128)),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.conectionLines,((e,o)=>((0,s.wg)(),(0,s.iD)("div",{class:(0,r.C_)(["connection-line",{active:e.isActive}]),key:o,onClick:o=>t.$emit("removeConnection",e.connection),style:(0,r.j5)({left:`${e.x}px`,top:`${e.y}px`,width:`${e.width}px`,transform:`rotate(${e.angle}deg)`})},null,14,At)))),128))],34)]),(0,s._)("button",{class:"btn btn-outline-dark d-none",onClick:e[2]||(e[2]=(...e)=>t.copyAirportsJSON&&t.copyAirportsJSON(...e))}," Copy JSON ")])}o(6718);function St(t,e,o,i){return Math.sqrt((t-o)*(t-o)+(e-i)*(e-i))}var Pt=(0,s.aZ)({data(){return{draggingAirport:null,airportColors:{},timer:0}},props:{airports:{required:!0,type:Array},connections:{required:!0,type:Array},regionColors:{required:!0,type:Array},activeRoute:{required:!0,type:Array},selectedOptionStart:{required:!0,type:Object},selectedOptionEnd:{required:!0,type:Object}},methods:{moveDraggingAirport(t){this.draggingAirport&&this.$refs["map-container"]instanceof HTMLElement&&(this.draggingAirport.x=t.clientX-this.$refs["map-container"].offsetLeft,this.draggingAirport.y=t.clientY-this.$refs["map-container"].offsetTop)},copyAirportsJSON(){navigator.clipboard.writeText(JSON.stringify({airports:this.airports,connections:this.connections,regionColors:this.regionColors}))},setAirportColors(){let t={};this.regionColors.forEach((e=>{e.ids.forEach((o=>{t[o]=e.color}))}));let e={};this.airports.forEach((o=>{let i=o.id.substring(0,2);e[o.id]=t[i]})),this.airportColors=e},createConnectionWithSelected(t){if(""==this.selectedOptionStart.value||this.selectedOptionStart.value==t)return;const e={ids:[this.selectedOptionStart.value,t],cost:0};this.$emit("addConnection",e)}},computed:{conectionLines(){let t=[];return this.connections.forEach((e=>{const o=this.airports.find((t=>t.id==e.ids[0])),i=this.airports.find((t=>t.id==e.ids[1]));if(!o||!i)return;const s=o.x,r=o.y,a=i.x,n=i.y,c=St(s,r,a,n),d=(s+a)/2,l=(r+n)/2,p=Math.atan2(r-n,s-a),u=180*p/Math.PI,h=this.activeRoute.join("-"),m=-1!=h.indexOf(`${o.id}-${i.id}`)||-1!=h.indexOf(`${i.id}-${o.id}`);t.push({x:d-c/2,y:l,width:c,angle:u,isActive:m,connection:e})})),t}},directives:{tippy:Q.XM},created(){this.setAirportColors()}});const Ct=(0,J.Z)(Pt,[["render",yt],["__scopeId","data-v-637e0c06"]]);var Rt=Ct;const xt={class:"alert alert-light mt-4 text-center",role:"alert"},Ot=(0,s._)("img",{src:"img/empty-box.jpg",class:"img-fluid w-25 d-block mx-auto",alt:""},null,-1);function Mt(t,e){return(0,s.wg)(),(0,s.iD)("div",xt,[Ot,(0,s.Uk)(" Suas rotas aparecerão aqui ")])}const Et={},bt=(0,J.Z)(Et,[["render",Mt]]);var wt=bt,_t=o(7327);class kt{constructor(t,e,o){(0,_t.Z)(this,"points",void 0),(0,_t.Z)(this,"initialPoint",void 0),(0,_t.Z)(this,"finalPoint",void 0),(0,_t.Z)(this,"validPaths",[]),(0,_t.Z)(this,"longestDistance",-1),(0,_t.Z)(this,"pathsLimit",0),t.forEach((t=>{const e=t.connections.map((t=>{const e=t.point.x,i=t.point.y,s=o.x,r=o.y,a=Math.sqrt((e-s)*(e-s)+(i-r)*(i-r));return{con:t,distance:a}})).sort(((t,e)=>t.distance-e.distance));t.connections=e.map((t=>t.con))})),this.points=t,this.initialPoint=e,this.finalPoint=o}setPathsLimit(t){this.pathsLimit=t}getValidPaths(){return this.validPaths}addValidPath(t){const e=this.longestDistance;let o=-1,i=!1;this.validPaths.length>=this.pathsLimit&&(i=!0,this.validPaths=this.validPaths.filter((t=>t.distance!=e&&(t.distance>o&&(o=t.distance),!0)))),this.validPaths.push(t),i&&t.distance>o||!i&&t.distance>this.longestDistance?this.longestDistance=t.distance:i&&(this.longestDistance=o)}traverse(t=this.initialPoint,e={sequence:"",distance:0}){if(e.sequence+=t.id+"-",t.id==this.finalPoint.id)return e.sequence=e.sequence.slice(0,e.sequence.length-1),0==this.pathsLimit?void this.validPaths.push(e):void this.addValidPath(e);t.connections.forEach((t=>{if(e.sequence.includes(t.point.id))return;if(0!==this.pathsLimit&&e.distance+t.cost>this.longestDistance&&this.validPaths.length>=this.pathsLimit)return;const o={sequence:e.sequence,distance:e.distance};o.distance+=t.cost,this.traverse(t.point,o)}))}}var Tt=(0,s.aZ)({name:"App",components:{ModelSelect:I.q2,RouteTable:rt,MapViewer:Rt,LoadingState:Z,EmptyState:wt},data(){return{airportOptionsStart:[],airports:D.$1,connections:D.I_,regionColors:D.sL,selectedOptionStart:{value:""},selectedOptionEnd:{value:""},airportRoutes:[],isLoadingRoutes:!1,activeRoute:[],pathsLimit:100,searchType:"rapida",calculatedPathsCount:0,calculatedTime:0}},mounted(){this.loadAirportOptions()},methods:{loadAirportOptions(){this.airportOptionsStart=this.airports.map((t=>({value:t.id,text:`${t.id} - ${t.description}`})))},pickRoutes(){this.isLoadingRoutes=!0,this.airportRoutes=[],["server-todas","server-melhor"].includes(this.searchType)?this.serverComputeRoutes():this.localComputeRoutes()},localComputeRoutes(){let t=[];this.airports.forEach((e=>{t.push({id:e.id,connections:[],x:e.x,y:e.y})}));const e=t.find((t=>t.id==this.selectedOptionStart.value)),o=t.find((t=>t.id==this.selectedOptionEnd.value));if(this.connections.forEach((e=>{const o=e.ids[0],i=e.ids[1],s=this.airports.find((t=>t.id==o)),r=this.airports.find((t=>t.id==i));if(!s||!r)return;const a=t.find((t=>t.id==o)),n=t.find((t=>t.id==i));if(!a||!n)return;const c=St(s.x,s.y,r.x,r.y);a.connections.push({point:n,cost:c}),n.connections.push({point:a,cost:c})})),!e||!o)return;const i=new kt(t,e,o);"rapida"==this.searchType&&i.setPathsLimit(this.pathsLimit),setTimeout((()=>{const t=new Date,e=t.getTime();i.traverse();let o=[];o=i.getValidPaths(),this.calculatedPathsCount=o.length;const s=new Date,r=s.getTime();o=o.sort(((t,e)=>t.distance-e.distance)),o=o.slice(0,1e5),this.isLoadingRoutes=!1,this.airportRoutes=[],o.forEach(((t,e)=>{this.airportRoutes.push({pos:e.toString(),distance:Math.round(t.distance),path:t.sequence})})),this.calculatedTime=(r-e)/1e3}),30)},serverComputeRoutes(){let t="";const e=()=>{console.log("Buscando melhor rota"),(0,F.Z)({method:"get",url:`http://localhost:8080/api/v/1.0/dijkstra/get-best-route?grafoID=${t}&origem=${this.selectedOptionEnd.value}&destino=${this.selectedOptionStart.value}`}).then((t=>{const e=t.data?.data;e&&(this.airportRoutes.push({pos:"0",distance:Math.round(e.distance),path:e.path}),this.isLoadingRoutes=!1)})).catch((t=>{z().fire({title:"Erro",icon:"error",text:"Não foi possivel estabelecer uma conexão com o servidor"})}))},o=()=>{(0,F.Z)({method:"get",url:`http://localhost:8080/api/v/1.0/dijkstra/list-all-routes?grafoID=${t}&origem=${this.selectedOptionEnd.value}&destino=${this.selectedOptionStart.value}&qtd=${this.pathsLimit}`}).then((t=>{const e=t.data?.data;this.isLoadingRoutes=!1;let o=[];e.forEach(((t,e)=>{o.push({pos:e.toString(),path:t.path,distance:Math.round(t.distance)})})),this.airportRoutes=o})).catch((t=>{z().fire({title:"Erro",icon:"error",text:"Não foi possivel estabelecer uma conexão com o servidor"})}))};(0,F.Z)({method:"post",url:"http://localhost:8080/api/v/1.0/dijkstra/grafo/addgrafo",data:this.getAPIAirports()}).then((i=>{200==i.status&&"string"==typeof i.data?.data?.grafoID&&(t=i.data.data.grafoID,"server-melhor"==this.searchType?e():o())})).catch((t=>{z().fire({title:"Erro",icon:"error",text:"Não foi possivel estabelecer uma conexão com o servidor"})}))},getAPIAirports(){const t=[];return this.airports.forEach((e=>{t.push({id:e.id,connections:[]})})),this.connections.forEach((e=>{const o=e.ids[0],i=e.ids[1],s=this.airports.find((t=>t.id==o)),r=this.airports.find((t=>t.id==i));if(!s||!r)return;const a=t.find((t=>t.id==o)),n=t.find((t=>t.id==i));if(!a||!n)return;const c=St(s.x,s.y,r.x,r.y);a.connections.push({id:n.id,cost:c}),n.connections.push({id:a.id,cost:c})})),t},setActiveRoute(t){this.activeRoute=t instanceof Array?t:t.split("-")},setOptionStartAirport(t){this.selectedOptionEnd.value==t&&(this.selectedOptionEnd={value:""}),this.selectedOptionStart={value:t}},setOptionEndAirport(t){this.selectedOptionStart.value==t&&(this.selectedOptionStart={value:""}),this.selectedOptionEnd={value:t}},removeConnection(t){this.connections=this.connections.filter((e=>e.ids!==t.ids))},addConnection(t){this.connections.push(t)}},computed:{airportOptionsEnd(){return this.airportOptionsStart.filter((t=>this.selectedOptionStart.value!=t.value))},canpickRoutes(){return""!=this.selectedOptionEnd.value&&""!=this.selectedOptionStart.value}},watch:{selectedOptionStart(){this.selectedOptionStart.value==this.selectedOptionEnd.value&&(this.selectedOptionEnd={value:""})},searchType(){"rapida"==this.searchType&&this.pathsLimit>1e4&&(this.pathsLimit=1e4)}}});const Gt=(0,J.Z)(Tt,[["render",G]]);var It=Gt,Dt=o(5893),Lt=o(6553),qt=o.n(Lt);const Vt=(0,i.ri)(It);Vt.component("EasyDataTable",Dt.Z),Vt.use(Q.ZP,{directive:"tippy",component:"tippy",defaultProps:{allowHTML:!0,placement:"top",delay:[300,50]}}),Vt.use(qt()),Vt.mount("#app")}},e={};function o(i){var s=e[i];if(void 0!==s)return s.exports;var r=e[i]={exports:{}};return t[i].call(r.exports,r,r.exports,o),r.exports}o.m=t,function(){var t=[];o.O=function(e,i,s,r){if(!i){var a=1/0;for(l=0;l<t.length;l++){i=t[l][0],s=t[l][1],r=t[l][2];for(var n=!0,c=0;c<i.length;c++)(!1&r||a>=r)&&Object.keys(o.O).every((function(t){return o.O[t](i[c])}))?i.splice(c--,1):(n=!1,r<a&&(a=r));if(n){t.splice(l--,1);var d=s();void 0!==d&&(e=d)}}return e}r=r||0;for(var l=t.length;l>0&&t[l-1][2]>r;l--)t[l]=t[l-1];t[l]=[i,s,r]}}(),function(){o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,{a:e}),e}}(),function(){o.d=function(t,e){for(var i in e)o.o(e,i)&&!o.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){o.p="/grafos-aeroporto-interface/"}(),function(){var t={143:0};o.O.j=function(e){return 0===t[e]};var e=function(e,i){var s,r,a=i[0],n=i[1],c=i[2],d=0;if(a.some((function(e){return 0!==t[e]}))){for(s in n)o.o(n,s)&&(o.m[s]=n[s]);if(c)var l=c(o)}for(e&&e(i);d<a.length;d++)r=a[d],o.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return o.O(l)},i=self["webpackChunkgrafos_aeroporto_interface"]=self["webpackChunkgrafos_aeroporto_interface"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=o.O(void 0,[998],(function(){return o(9206)}));i=o.O(i)})();
//# sourceMappingURL=app.7d8a649a.js.map